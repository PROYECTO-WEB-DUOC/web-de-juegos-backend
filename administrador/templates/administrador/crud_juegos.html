<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/juegos.css' %}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Juegos</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <script>
        function Eliminarproducto(id) {
            console.log(id);
            Swal.fire({
                title: "¿Estás seguro de eliminar este juego?",
                text: "",
                icon: "question",
                showCancelButton: true,
                cancelButtonText: "Cancelar",
                confirmButtonText: "Eliminar",
                confirmButtonColor: "#dc3545"
            }).then(function(result) {
                if (result.isConfirmed) {
                    window.location.href = "/administrador/juegos_del/" + id;
                }
            });
        }
    </script>

     <a href="{% url 'admin' %}" class="btn btn-primary">Volver</a>
    <h1 style="text-align: center;">Juegos</h1>

    <a href="{% url 'juegos_add' %}" class="btn btn-success">Agregar Nuevo Juego</a>
    <br>
    <br>
    <div class="container-fluid">  
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Puntuación</th>
                    <th scope="col">Imagen</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Categoría</th>
                    <th scope="col">Video</th>
                    <th scope="col">Estreno</th>
                    <th scope="col">Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for juego in entity %}
                <tr>
                    <td>{{ juego.idjuego }}</td>
                    <td>{{ juego.nombre }}</td>
                    <td>{{ juego.puntuacion }}</td>
                    <td><img src="{{ juego.imagen.url }}" style="width: 50px;" alt=""></td>
                    <td>{{ juego.precio }}</td>
                    <td>{{ juego.id_categoria }}</td>
                    <td><video src="{{ juego.video.url }}" width="100px"></video></td>
                    <td>{{ juego.estreno }}</td>
                    <td>
                       <a href="#" onclick="Eliminarproducto('{{ juego.idjuego }}')" class="btn btn-danger">Eliminar</a>
                       <a href="{% url 'juegos_edit' pk=juego.idjuego %}" class="btn btn-primary">Modificar</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div>
            {% include 'administrador/paginator.html'%}
        </div>
    </div>

    {% if juegos_edit %}
    <div class="container">
        <h2>Modificar Juego</h2>
        <form action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="Actualizar" class="btn btn-primary">
        </form>
    </div>
    {% endif %}

</body>
</html>
